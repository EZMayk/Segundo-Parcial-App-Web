# ========================================
# VARIABLES DE ENTORNO - EJEMPLO
# ========================================
# Copiar a .env y completar con valores reales

# ========== BASE DE DATOS ==========
# Para ms-detallepedido
DB_HOST=localhost
DB_PORT=5434
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_NAME=ms_detallepedido

DATABASE_URL=postgresql://postgres:postgres@localhost:5434/ms_detallepedido

# ========== RABBITMQ ==========
RABBITMQ_URL=amqp://localhost:5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest

# ========== WEBHOOKS ==========
WEBHOOK_PUBLISHER_ENABLED=true

# Secret compartido para firmar webhooks (HMAC)
# IMPORTANTE: Debe ser el mismo en Publisher y Edge Functions
WEBHOOK_SECRET=tu-super-secret-key-muy-largo-para-hmac-sha256

# URL base de Supabase donde están las Edge Functions
# Reemplazar tu-proyecto con tu project-ref real
SUPABASE_PROJECT_URL=https://tu-proyecto.supabase.co

# ========== BULL/BULLMQ (QUEUE DE REINTENTOS) ==========
BULL_REDIS_HOST=localhost
BULL_REDIS_PORT=6379
BULL_REDIS_PASSWORD=

# Configuración de reintentos exponencial
WEBHOOK_MAX_RETRIES=6
WEBHOOK_INITIAL_DELAY_MS=60000

# ========== SUPABASE ==========
SUPABASE_URL=https://tu-proyecto.supabase.co
SUPABASE_ANON_KEY=tu-anon-key-aqui
SUPABASE_SERVICE_ROLE_KEY=tu-service-role-key-aqui

# ========== TELEGRAM (Opcional) ==========
# Para notificaciones en Telegram
TELEGRAM_BOT_TOKEN=123456789:ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghi
TELEGRAM_CHAT_ID=987654321

# ========== ENTORNO ==========
NODE_ENV=development
LOG_LEVEL=debug

# ========== FEATURES FLAGS ==========
ENABLE_DLQ_PERSISTENCE=true
ENABLE_WEBHOOK_AUDIT_LOG=true
ENABLE_IDEMPOTENCY_CHECK=true
ENABLE_HMAC_VALIDATION=true
ENABLE_TIMESTAMP_VALIDATION=true
